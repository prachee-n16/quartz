<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="File System The file system provides organization for the files through a directory structure + maintains metadata related to files."><meta property="og:title" content="File System"><meta property="og:description" content="File System The file system provides organization for the files through a directory structure + maintains metadata related to files."><meta property="og:type" content="website"><meta property="og:image" content="https://prachee.me/icon.png"><meta property="og:url" content="https://prachee.me/notes/File-System/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="File System"><meta name=twitter:description content="File System The file system provides organization for the files through a directory structure + maintains metadata related to files."><meta name=twitter:image content="https://prachee.me/icon.png"><title>File System</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://prachee.me//profile.png><link href=https://prachee.me/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://prachee.me/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://prachee.me/js/darkmode.1fe3a73e18ec59d64acbac50b3472915.min.js></script>
<script src=https://prachee.me/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://prachee.me/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://prachee.me/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://prachee.me/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://prachee.me/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://prachee.me/",fetchData=Promise.all([fetch("https://prachee.me/indices/linkIndex.a20fd8ab1e04cdd9abb9e95232e2c155.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://prachee.me/indices/contentIndex.a321e517f77d8d96fae4645ce546e6bc.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://prachee.me",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://prachee.me",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/prachee.me\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=prachee.me src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://prachee.me/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://prachee.me/>Prachee Nanda</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>File System</h1><p class=meta>Last updated
Mar 13, 2024
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/notes/File%20System.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://prachee.me/tags/C/>C</a></li><li><a href=https://prachee.me/tags/Areas/>Areas</a></li><li><a href=https://prachee.me/tags/OperatingSystems/>Operating systems</a></li><li><a href=https://prachee.me/tags/completed/>Completed</a></li><li><a href=https://prachee.me/tags/ece252/>Ece252</a></li></ul><p><strong>File System</strong>
The file system provides organization for the files through a directory structure + maintains metadata related to files.</p><p>In UNIX, &ldquo;everything is a file&rdquo;</p><ul><li>TODO: Look into:
<a href=https://tldp.org/LDP/sag/html/dev-fs.html rel=noopener>https://tldp.org/LDP/sag/html/dev-fs.html</a></li><li>An area of disk is designates as belonging to a file, and file is just a logical unit to organize this.</li></ul><p>Files have the following attributes:</p><ul><li>Name</li><li>Identifier: numerical value that serves as a unique identifier for the file within the file system (find this for a file)<ul><li>there is not much of a difference between this and name</li></ul></li><li>Type<ul><li>in most OS, any program can open arbitrary files and the extensions are just a suggestion.</li></ul></li><li>Location</li><li>Size</li><li>Protection</li><li>Time, Date, User ID</li></ul><p>QNX (OS provided by Blackberry) - primarily used in embedded systems</p><ul><li>files are maintained in a structure. Directories are really just like files, information about what files are where, and they are also being stored on disks</li></ul><p>Six basic file ops:</p><ol><li>Creating a file
<a rel=noopener class="internal-link broken" data-src=#create>Go to Section</a></li><li>Writing a file
<a rel=noopener class="internal-link broken" data-src=#write>Go to Section</a></li><li>Reading a file
<a rel=noopener class="internal-link broken" data-src=#read>Go to Section</a></li><li>Reposition within a file
<a rel=noopener class="internal-link broken" data-src=#seek>Go to section</a></li><li>Delete a file
<a rel=noopener class="internal-link broken" data-src=#delete>Go to section</a></li><li>Truncate a file
<a rel=noopener class="internal-link broken" data-src=#delete>Go to section</a></li></ol><a href=#create><h4 id=create><span class=hanchor arialabel=Anchor># </span>create</h4></a><p>(by extension write/read)
fopen will call open on a file - When running Windows, it actually runs openFileEx() under the hood. We don&rsquo;t really need to care since it abstracts this from us. The UNIX system libraries use an integer instead of a FILE*.</p><ul><li>FILE* is an access to the file apparently? access point to a file or an input/output stream rather than the file or stream itself</li></ul><p>In addition to the filename as the first parameter, the function is called with the mode as the second parameter.</p><ul><li><strong>&ldquo;r&rdquo; (Read)</strong>: Opens a file for reading.</li><li><strong>&ldquo;w&rdquo; (Write)</strong>: Opens a file for writing.</li><li><strong>&ldquo;a&rdquo; (Append)</strong>: Opens a file for writing, but if the file exists, it appends data to the end rather than truncating it.</li><li><strong>&ldquo;r+&rdquo; (Read and Write)</strong>: Opens a file for both reading and writing</li><li><strong>&ldquo;w+&rdquo; (Write and Read)</strong>: Opens a file for both reading and writing</li><li><strong>&ldquo;a+&rdquo; (Append and Read)</strong>: Opens a file for both reading and writing. If the file doesn&rsquo;t exist, it creates a new file. If it exists, it appends data to the end.</li><li>&ldquo;x&rdquo; (new to C): create a new file safely without risking the unintentional overwriting of an existing file
If you add b to the end, like <code>rb</code> then we are reading in binary mode. Mostly irrelevant.</li></ul><a href=#seek><h4 id=seek><span class=hanchor arialabel=Anchor># </span>seek</h4></a><ul><li>Repositioning is also called a seek, done in C with the <code>fseek()</code> call which adjusts pointer for reading or writing</li><li>you can go to any arbit. character so it&rsquo;s actually kind of dangerous and we can not call this op if a file is opened for append</li><li>passing a negative number will move you backwards/</li></ul><a href=#delete><h4 id=delete><span class=hanchor arialabel=Anchor># </span>delete</h4></a><ul><li>In C, a file is deleted with the remove() function because this simple program deletes whatever file is provided as the second argument.
Truncating can only be done with the UNIX libraries using either truncate() or ftruncate().</li></ul><a href=#write><h4 id=write><span class=hanchor arialabel=Anchor># </span>write</h4></a><ul><li>writing is easy because it works like printf, actual function call is just called <code>fprintf</code></li></ul><a href=#read><h4 id=read><span class=hanchor arialabel=Anchor># </span>read</h4></a><ul><li>Reading from a file involves the use of fscanf which is a mirror image of fprintf</li></ul><p>A directory is a symbol table that translates file name to directory entries. Typically support the below operations</p><ul><li>search</li><li>list directory</li><li>navigate file system</li><li>add and remove and rename file
Tree-structured: there is a root directory, and every file in the system has a unique name when the name and path to it (from the root) are combined.</li></ul><p>File systems may also support the sharing of files. There is one copy of the file but it has more than one name. In UNIX this is called a link and this is effectively a pointer to another file.</p><ul><li>Symlinks, or symbolic links, are just references by file name.</li><li>Creating a hardlink is creating a pointer to the underlying file in the file system.</li><li>If a hardlink exists and the user deletes that file, the file still remains on disk until last hardlink is removed</li></ul><p>Also: <a href=/notes/File-Access-Mechanisms-in-Filesystems rel=noopener class=internal-link data-src=/notes/File-Access-Mechanisms-in-Filesystems>File Access Mechanisms in Filesystems</a></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://prachee.me/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Prachee Nanda using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2024</p><ul><li><a href=https://prachee.me/>Home</a></li><li><a href="https://www.instagram.com/pracheenanda/?hl=en">Instagram</a></li><li><a href=https://github.com/prachee-n16>GitHub</a></li><li><a href="https://www.linkedin.com/in/pracheenanda/?originalSubdomain=ca">Linkedin</a></li></ul></footer></div></div></body></html>