<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="To execute a program, the components for a minimal set are:
 Main memory System Bus Processor  Within this, we have a I/O communicating data to us that requires some processing Central Processing Unit (with a Control Unit and ALU) communicates with memory unit."><meta property="og:title" content="Interrupts and System Calls"><meta property="og:description" content="To execute a program, the components for a minimal set are:
 Main memory System Bus Processor  Within this, we have a I/O communicating data to us that requires some processing Central Processing Unit (with a Control Unit and ALU) communicates with memory unit."><meta property="og:type" content="website"><meta property="og:image" content="https://prachee.me/icon.png"><meta property="og:url" content="https://prachee.me/notes/Interrupts-and-System-Calls/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Interrupts and System Calls"><meta name=twitter:description content="To execute a program, the components for a minimal set are:
 Main memory System Bus Processor  Within this, we have a I/O communicating data to us that requires some processing Central Processing Unit (with a Control Unit and ALU) communicates with memory unit."><meta name=twitter:image content="https://prachee.me/icon.png"><title>Interrupts and System Calls</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://prachee.me//profile.png><link href=https://prachee.me/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://prachee.me/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://prachee.me/js/darkmode.1fe3a73e18ec59d64acbac50b3472915.min.js></script>
<script src=https://prachee.me/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://prachee.me/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://prachee.me/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://prachee.me/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://prachee.me/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://prachee.me/",fetchData=Promise.all([fetch("https://prachee.me/indices/linkIndex.0c08e98d345dd043708c1e7b7a138452.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://prachee.me/indices/contentIndex.493d17514c03b65c657bb578e3955e69.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://prachee.me",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://prachee.me",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/prachee.me\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=prachee.me src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://prachee.me/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://prachee.me/>Prachee Nanda</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Interrupts and System Calls</h1><p class=meta>Last updated
Mar 13, 2024
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/notes/Interrupts%20and%20System%20Calls.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://prachee.me/tags/Areas/>Areas</a></li><li><a href=https://prachee.me/tags/OperatingSystems/>Operating systems</a></li><li><a href=https://prachee.me/tags/to-complete/>To complete</a></li><li><a href=https://prachee.me/tags/ece252/>Ece252</a></li></ul><p>To execute a program, the components for a minimal set are:</p><ul><li>Main memory</li><li>System Bus</li><li>Processor<ul><li>Within this, we have a I/O communicating data to us that requires some processing</li><li>Central Processing Unit (with a Control Unit and ALU) communicates with memory unit.</li></ul></li></ul><p>**Processor **</p><ul><li>Brain of the computer which fetches instructions, decodes them, executes them (a cycle which repeats infinitely)</li><li>Different steps may be completed in parallel (pipeline) &ndash;> ECE 222</li><li>The largest unit in a processor is the word:<ul><li>32-bit computer -> 32-bit word, 64-bit computer -> 64-bit word</li></ul></li></ul><p><strong>CPU</strong></p><ul><li>CPU instructions are specific to the processor (x86, ARM, RISC, MIFS)<ul><li>Some instructions are only available in &ldquo;supervisor&rdquo; mode and running it in user mode is an error.</li><li>When running our programs, we can&rsquo;t ask to &ldquo;close&rdquo; the computer or read input from keyboard directly. What if we do the wrong thing, crash the computer in a while loop forever?</li></ul></li><li>CPUs have storage locations called registers<ul><li>These will store data or instructions. A great analogy is if memory is a bookshelf, these are your pockets - quick access to data</li><li>Management of registers is partially the role of the OS.</li></ul></li></ul><p><strong>Critical Registers in CPU</strong></p><ul><li>Program Counter - address of next instruction.<ul><li>The reason we have this is because if statements or for loops, it&rsquo;s not always sequential. We might need to branch back to a previous line.</li></ul></li><li>Status Register - Array of bits to indicate flags. For example, if we are in supervisor mode, if there&rsquo;s low power</li><li>Instruction Register - Instruction most recently fetched, so in decode stage, we can refer to this</li><li>Stack Pointer - Where the local data is kept. We really care about this because all our local variables are here in memory</li><li>General Purpose Registers - store data, addresses etc. Basically, pockets to put in data to use later.</li></ul><p>How do we inform the computer of something that just happened? <strong>Interrupts</strong></p><ul><li>CPU needs data but it takes a variable amount of time to get that information, while I work on something else.<ul><li>Interrupt: Get a notification when data has arrived</li></ul></li><li>Polling is separate: Check periodically if the data has arrived</li></ul><p>Interrupts are a way to improve processor utilization (as opposed to polling)</p><ul><li><p>When an interrupt fires, the CPU might ignore it but usually, we need to handle it.</p><ul><li>When the computer is in sleep mode, we might want to ignore the key interrupt.</li></ul></li><li><p>OS, the goat will store the state of the CPU and whatever the processor is running, handles the interrupt and restores the state.</p><ul><li>If CPU is in the middle of something that can not be interrupted, interrupts will be disabled.</li></ul></li><li><p>Source of Interrupts: We can put polling into four categories, based on their origin</p><ul><li>Program - When doing concurrency, this is the most common one.</li><li>Timer - If we want to blink an led at a certain rate, timer will go again</li><li>Input/Output - Moving a mouse, keyboard input etc.</li><li>Hardware Failure - During a power outage, or battery low (not hardware failure but same idea), where the PC will safely shut itself off.</li></ul></li></ul><p>There can be multiple interrupts in a short period of time.</p><ul><li>In sequential handling, we finish Interrupt Handler X, and then go to Interrupt Handler Y.<ul><li>The best way to think about this is two questions asking a teacher</li></ul></li><li>In nested handling, we go to Interrupt Handler X and then go to Interrupt Handler Y, finish it, finish X and go back<ul><li>Makes sense if Y is higher priority, think of a teacher answering a student&rsquo;s question (Interrupt Handler X) and a fire alarm starts (Interrupt Handler Y starts with obviously higher priority)
In general, priorities are assigned a priority level. If priority level is higher, it will interrupt anything lower than it.</li></ul></li></ul><p>The OS must store the program state when an interrupt occurs (state being the values of registers). Push them onto the stack and when the interrupt is finished, pop them off the stack, and continue execution.</p><p><strong>Context Switching:</strong> process of saving the state of one program and restoring the state of another, allowing the CPU to efficiently manage multiple tasks.
<strong>Trap</strong>: software-generated interrupt. Generated by an error (invalid instruction) or user program request</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://prachee.me/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Prachee Nanda using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2024</p><ul><li><a href=https://prachee.me/>Home</a></li><li><a href="https://www.instagram.com/pracheenanda/?hl=en">Instagram</a></li><li><a href=https://github.com/prachee-n16>GitHub</a></li><li><a href="https://www.linkedin.com/in/pracheenanda/?originalSubdomain=ca">Linkedin</a></li></ul></footer></div></div></body></html>